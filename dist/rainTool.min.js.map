{"version":3,"file":"rainTool.min.js","sources":["../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../src/string/string.ts","../src/string/index.ts","../src/uid/index.ts","../src/uid/uid.ts","../src/bus/index.ts","../src/pubsub/index.ts","../src/lookup/index.ts","../node_modules/@babel/runtime/helpers/esm/typeof.js","../src/clone/index.ts","../src/sleep/index.ts","../src/deth/index.ts","../src/main.ts"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","function reverse(str: string): string {\r\n    return str.split('').reverse().join('')\r\n}\r\n\r\nfunction palindrome(str: string): boolean {\r\n    return str === reverse(str)\r\n}\r\n\r\nfunction truncate(str: string, num: number): string {\r\n    return str.length > num ? str.slice(0, num) + '...' : str\r\n}\r\n\r\nexport { reverse, palindrome, truncate }","import { reverse, palindrome, truncate } from './string'\r\n\r\nclass Str {\r\n    constructor(public str: string) { }\r\n\r\n    reverse(): string {\r\n        return reverse(this.str)\r\n    }\r\n    palindrome(): boolean {\r\n        return palindrome(this.str)\r\n    }\r\n    truncate(number: number): string {\r\n        return truncate(this.str, number)\r\n    }\r\n}\r\n\r\nexport { Str }","import { time, number, string, symbols, custom } from './uid'\r\n\r\nclass Uid {\r\n    constructor(public length: number) { }\r\n\r\n    time(progressiveSystem: number): string {\r\n        return time(progressiveSystem)\r\n    }\r\n\r\n    number(): number {\r\n        return number(this.length)\r\n    }\r\n\r\n    string(): string {\r\n        return string(this.length)\r\n    }\r\n\r\n    symbols(): string {\r\n        return symbols(this.length)\r\n    }\r\n\r\n    custom(str: string): string {\r\n        return custom(str, this.length)\r\n    }\r\n}\r\n\r\nexport { Uid }","function time(progressiveSystem: number): string {\r\n    return (Math.random() * Date.now()).toString(progressiveSystem).replace('.', '')\r\n}\r\n\r\nfunction number(length: number): number {\r\n    return Math.round(Math.random() * Math.pow(10, length))\r\n}\r\n\r\nfunction string(length: number): string {\r\n    const str = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\r\n    let result = ''\r\n    for (let i = 0; i < length; i++) {\r\n        result += str[Math.floor(Math.random() * (str.length))]\r\n    }\r\n    return result\r\n}\r\n\r\nfunction symbols(length: number): string {\r\n    const str = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ@$!%*#_~?&^'\r\n    let result = ''\r\n    for (let i = 0; i < length; i++) {\r\n        result += str[Math.floor(Math.random() * (str.length))]\r\n    }\r\n    return result\r\n}\r\n\r\nfunction custom(str: string, length: number): string {\r\n    let result = ''\r\n    for (let i = 0; i < length; i++) {\r\n        result += str[Math.floor(Math.random() * (str.length))]\r\n    }\r\n    return result\r\n}\r\n\r\nexport { time, number, string, symbols, custom }","class Bus {\r\n    callbacks: any\r\n    constructor() {\r\n        this.callbacks = {}\r\n    }\r\n    on(key: string, func: Function): Bus {\r\n        this.callbacks[key] ? this.callbacks[key].push(func) : this.callbacks[key] = [func]\r\n        return this\r\n    }\r\n    off(key: string | undefined): Bus {\r\n        key ? delete this.callbacks[key] : this.callbacks = {}\r\n        return this\r\n    }\r\n    emit(key: string, data: any): Bus {\r\n        if (this.callbacks[key] && this.callbacks[key].length > 0) {\r\n            for (let i = 0; i < this.callbacks[key].length; i++) {\r\n                this.callbacks[key][i](data)\r\n            }\r\n        }\r\n        return this\r\n    }\r\n    global(key: string): Bus {\r\n        (window as any)[key] = this\r\n        return this\r\n    }\r\n}\r\n\r\nexport { Bus }","import { Uid } from '../uid/index'\r\n\r\nclass PubSub {\r\n    callbacks: any\r\n    constructor() {\r\n        this.callbacks = {}\r\n    }\r\n\r\n    subscribe(channel: string, func: Function): string {\r\n        const id = new Uid(16).string()\r\n        this.callbacks[channel] ? this.callbacks[channel][id] = func : this.callbacks[channel] = {}, this.callbacks[channel][id] = func // 兼容IE\r\n        return id\r\n    }\r\n\r\n    publish(channel: string, data: any): PubSub {\r\n        if (this.callbacks[channel]) {\r\n            for (let key in this.callbacks[channel]) {\r\n                this.callbacks[channel][key](data)\r\n            }\r\n        }\r\n        return this\r\n    }\r\n\r\n    unsubscribe(key: string): PubSub {\r\n        if (key) {\r\n            if (typeof key === 'string') {\r\n                if (key in this.callbacks) {\r\n                    delete this.callbacks[key]\r\n                } else {\r\n                    for (let k in this.callbacks) {\r\n                        for (let k2 in this.callbacks[k]) {\r\n                            if (k2 === key) delete this.callbacks[k][k2]\r\n                            break\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        } else {\r\n            this.callbacks = {}\r\n        }\r\n        return this\r\n    }\r\n\r\n    global(key: string): PubSub {\r\n        (window as any)[key] = this\r\n        return this\r\n    }\r\n}\r\n\r\nexport { PubSub }","function l(path: string): string[] {\r\n    path = path.replace(/\\]/g, '')\r\n    const pathArray: string[] = []\r\n    let str: string = ''\r\n    for (const item of path) {\r\n        if (item != '.' && item != '[') {\r\n            str += item\r\n        } else {\r\n            pathArray.push(str)\r\n            str = ''\r\n        }\r\n    }\r\n    if (str !== '' && str != null) pathArray.push(str)\r\n    return pathArray\r\n}\r\n\r\nfunction v(object: object, pathArray: string[]): string {\r\n    let temp: any = object\r\n    for (const item of pathArray) {\r\n        temp = temp[item]\r\n    }\r\n    return temp\r\n}\r\n\r\nclass Lookup {\r\n    object: object\r\n    pathArray: string[]\r\n    value: string\r\n    constructor(obj: object) {\r\n        this.object = obj\r\n        this.pathArray = []\r\n        this.value = ''\r\n    }\r\n\r\n    find(path: string): Lookup {\r\n        this.pathArray = l(path)\r\n        this.value = v(this.object, this.pathArray)\r\n        return this\r\n    }\r\n\r\n    replace(obj: object): Lookup {\r\n        this.object = obj\r\n        return this\r\n    }\r\n}\r\n\r\nexport { Lookup }","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","function c(target: any): any {\r\n    if (typeof target === 'object' && target != null) {\r\n        const result: any = Array.isArray(target) ? [] : {}\r\n        for (let key in target) {\r\n            if (target.hasOwnProperty(key)) result[key] = target[key]\r\n        }\r\n        return result\r\n    } else {\r\n        return target\r\n    }\r\n}\r\n\r\nfunction d(target: any, map: Map<any, any> = new Map()): any {\r\n    if (typeof target === 'object' && target != null) {\r\n        if (map.get(target)) return target\r\n        const isArray: boolean = Array.isArray(target)\r\n        let result: any = isArray ? [] : {}\r\n        map.set(target, true)\r\n        if (isArray) {\r\n            target.forEach((item: any, index: any) => {\r\n                result[index] = d(item, map)\r\n            })\r\n        } else {\r\n            Object.keys(target).forEach(key => {\r\n                result[key] = d(target[key], map)\r\n            })\r\n        }\r\n        return result\r\n    } else {\r\n        return target\r\n    }\r\n}\r\n\r\nclass Clone {\r\n    constructor(public target: any) { }\r\n\r\n    clone(): any {\r\n        return c(this.target)\r\n    }\r\n\r\n    deepClone(): any {\r\n        return d(this.target)\r\n    }\r\n}\r\n\r\nexport { Clone }","class Sleep {\r\n    constructor(public func: Function) { }\r\n\r\n    s(seconds: number) {\r\n        setTimeout(() => {\r\n            return this.func()\r\n        }, seconds * 1000)\r\n    }\r\n\r\n    sync(seconds: number) {\r\n        const start = new Date().getTime()\r\n        while (new Date().getTime() - start < seconds * 1000) { }\r\n        return this.func()\r\n    }\r\n\r\n    promise(seconds: number) {\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n                resolve(this.func())\r\n            }, seconds * 1000);\r\n        })\r\n    }\r\n}\r\n\r\nexport { Sleep }","class DeTh {\r\n    constructor(public func: Function) { }\r\n\r\n    debounce(seconds: number, immediate: boolean): Function {\r\n        let timeout: NodeJS.Timeout | null\r\n        const func = this.func\r\n        return function () {\r\n            const args: IArguments = arguments\r\n\r\n            if (timeout) clearTimeout(timeout)\r\n\r\n            if (immediate) {\r\n                if (!timeout) func.apply(null, args)\r\n                timeout = setTimeout(() => {\r\n                    timeout = null\r\n                }, seconds * 1000)\r\n            } else {\r\n                timeout = setTimeout(() => {\r\n                    func.apply(null, args)\r\n                }, seconds * 1000)\r\n            }\r\n        }\r\n    }\r\n\r\n    throttle(seconds: number, immediate: boolean): Function {\r\n        let timeout: NodeJS.Timeout | null\r\n        const func = this.func\r\n        return function () {\r\n            const args: IArguments = arguments\r\n            if (immediate) {\r\n                if (!timeout) {\r\n                    func.apply(null, args)\r\n                    timeout = setTimeout(() => {\r\n                        timeout = null\r\n                    }, seconds * 1000)\r\n                }\r\n            } else {\r\n                if (!timeout) {\r\n                    timeout = setTimeout(() => {\r\n                        timeout = null\r\n                        func.apply(null, args)\r\n                    }, seconds * 1000)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    all(seconds: number, immediate: boolean): Function[] {\r\n        return [this.debounce(seconds, immediate), this.throttle(seconds, immediate)]\r\n    }\r\n}\r\n\r\nexport { DeTh }","import { Str } from './string/index'\r\nimport { Uid } from './uid/index'\r\nimport { Bus } from './bus/index'\r\nimport { PubSub } from './pubsub/index'\r\nimport { Lookup } from './lookup/index'\r\nimport { Clone } from './clone/index'\r\nimport { Sleep } from './sleep/index'\r\nimport { DeTh } from './deth/index'\r\n\r\nfunction str(str: string): Str {\r\n    return new Str(str)\r\n}\r\n\r\nfunction uid(length: number): Uid {\r\n    return new Uid(length)\r\n}\r\n\r\nfunction bus(): Bus {\r\n    return new Bus()\r\n}\r\n\r\nfunction pubsub(): PubSub {\r\n    return new PubSub()\r\n}\r\n\r\nfunction lookup(obj: object): Lookup {\r\n    return new Lookup(obj)\r\n}\r\n\r\nfunction clone(target: object): Clone {\r\n    return new Clone(target)\r\n}\r\n\r\nfunction sleep(func: Function): Sleep {\r\n    return new Sleep(func)\r\n}\r\n\r\nfunction deth(func: Function): DeTh {\r\n    return new DeTh(func)\r\n}\r\n\r\nexport { str, uid, bus, pubsub, lookup, clone, sleep, deth }"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","reverse","str","split","join","Str","this","palindrome","number","num","slice","truncate","Uid","progressiveSystem","Math","random","Date","now","toString","replace","time","round","pow","result","floor","string","symbols","custom","Bus","callbacks","func","push","data","window","PubSub","channel","id","k","k2","Lookup","obj","object","pathArray","value","path","item","l","temp","v","_typeof","Symbol","iterator","constructor","d","map","Map","get","isArray","Array","set","forEach","index","keys","Clone","hasOwnProperty","c","Sleep","seconds","setTimeout","_this","start","getTime","Promise","resolve","reject","_this2","DeTh","immediate","timeout","args","arguments","clearTimeout","apply","debounce","throttle"],"mappings":"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"}